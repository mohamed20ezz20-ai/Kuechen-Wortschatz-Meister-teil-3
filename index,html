<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçΩÔ∏è Deutsche K√ºchen-Meister | WFA Akademie - Ihr Weg zur perfekten deutschen Esskultur!</title>
    <meta name="description" content="Lernen Sie deutsche K√ºchenvokabeln, Restaurant-Etikette und Tischmanieren durch eine spannende Geschichte mit Chef Hans! A1-B1 Niveau.">
    <meta name="keywords" content="Deutsch lernen, K√ºchenvokabular, Restaurant Deutsch, WFA Akademie, Tischmanieren, deutsche Esskultur">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&family=Fredoka:wght@300;400;500;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Fredoka', 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a0000 0%, #4a0000 50%, #8B0000 100%);
            color: #fff9e6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ANIMATED BACKGROUND */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .floating-food {
            position: absolute;
            font-size: 40px;
            animation: float 20s infinite;
            opacity: 0.3;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-100px) rotate(90deg); }
            50% { transform: translateY(-50px) rotate(180deg); }
            75% { transform: translateY(-150px) rotate(270deg); }
        }

        /* CONTAINER */
        .app-container {
            width: 100%;
            max-width: 500px;
            min-height: 100vh;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.95);
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
            position: relative;
            border-left: 5px solid #FFD700;
            border-right: 5px solid #FFD700;
        }

        /* HEADER */
        .app-header {
            background: linear-gradient(145deg, #000000, #2d0000);
            padding: 20px;
            text-align: center;
            border-bottom: 4px solid #FFD700;
            position: relative;
            overflow: hidden;
        }

        .wfa-logo {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo-letter {
            font-size: 48px;
            font-weight: 900;
            animation: bounce 2s infinite;
        }

        .logo-letter.w { color: #fff; animation-delay: 0s; }
        .logo-letter.f { color: #FFD700; animation-delay: 0.2s; }
        .logo-letter.a { color: #FF6B6B; animation-delay: 0.4s; }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .logo-subtitle {
            font-size: 18px;
            color: #FFD700;
            font-weight: 700;
            letter-spacing: 3px;
            cursor: pointer;
        }

        /* SCREENS */
        .screen {
            display: none;
            padding: 20px;
            min-height: calc(100vh - 100px);
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* STORY INTRO */
        .story-intro {
            background: linear-gradient(145deg, rgba(20, 0, 0, 0.95), rgba(10, 0, 0, 0.98));
            border-radius: 25px;
            padding: 30px;
            margin: 20px 0;
            border: 3px solid #FFD700;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .story-title {
            font-size: 32px;
            font-weight: 900;
            color: #FFD700;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
            line-height: 1.2;
        }

        .story-text {
            font-size: 18px;
            line-height: 1.8;
            color: #E6D3A7;
            text-align: justify;
            margin: 15px 0;
        }

        .story-highlight {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(218, 165, 32, 0.1));
            padding: 15px;
            border-radius: 15px;
            border-left: 5px solid #FFD700;
            margin: 20px 0;
            font-weight: 600;
        }

        /* CHARACTER CARD */
        .character-card {
            background: linear-gradient(145deg, rgba(40, 0, 0, 0.9), rgba(20, 0, 0, 0.95));
            border-radius: 20px;
            padding: 20px;
            margin: 15px 0;
            border: 3px solid #FFD700;
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s;
        }

        .character-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
        }

        .character-avatar {
            font-size: 80px;
            animation: wave 2s infinite;
        }

        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-15deg); }
            75% { transform: rotate(15deg); }
        }

        .character-info h3 {
            font-size: 24px;
            color: #FFD700;
            margin-bottom: 8px;
        }

        .character-info p {
            font-size: 16px;
            color: #E6D3A7;
            line-height: 1.5;
        }

        /* LEVEL SELECTION */
        .level-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .level-card {
            background: linear-gradient(145deg, rgba(40, 0, 0, 0.9), rgba(20, 0, 0, 0.95));
            border-radius: 20px;
            padding: 25px 15px;
            text-align: center;
            cursor: pointer;
            border: 3px solid #FFD700;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .level-card::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.3), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
        }

        .level-card:hover::before {
            animation: shine 1.5s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .level-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.5);
        }

        .level-badge {
            font-size: 50px;
            margin-bottom: 15px;
            display: block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .level-name {
            font-size: 22px;
            font-weight: 800;
            color: #FFD700;
            margin-bottom: 8px;
        }

        .level-desc {
            font-size: 14px;
            color: #E6D3A7;
            line-height: 1.4;
        }

        .level-locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .level-locked::after {
            content: "üîí";
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 30px;
        }

        /* LEARNING CARD */
        .learning-card {
            background: linear-gradient(145deg, #1a0000, #000000);
            border-radius: 25px;
            padding: 30px;
            margin: 20px 0;
            border: 4px solid #FFD700;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
            min-height: 400px;
            perspective: 1000px;
        }

        .card-content {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .card-content.flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .word-icon {
            font-size: 100px;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
        }

        .word-german {
            font-size: 42px;
            font-weight: 900;
            color: #FFD700;
            margin: 20px 0;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
        }

        .word-type {
            font-size: 20px;
            color: #FF6B6B;
            font-weight: 700;
            margin: 10px 0;
        }

        .word-meaning {
            font-size: 20px;
            color: #E6D3A7;
            line-height: 1.8;
            margin: 20px 0;
            padding: 20px;
            background: rgba(30, 0, 0, 0.6);
            border-radius: 15px;
        }

        .word-example {
            font-size: 18px;
            color: #8EC5FC;
            font-style: italic;
            margin: 15px 0;
            padding: 15px;
            background: rgba(66, 165, 245, 0.1);
            border-radius: 12px;
            border-left: 4px solid #42A5F5;
        }

        /* PROGRESS BAR */
        .progress-container {
            background: rgba(30, 0, 0, 0.8);
            border-radius: 20px;
            height: 30px;
            margin: 20px 0;
            border: 3px solid #FFD700;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FF6B6B, #8EC5FC);
            border-radius: 20px;
            transition: width 0.5s;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-text {
            text-align: center;
            font-size: 18px;
            color: #FFD700;
            font-weight: 700;
            margin-bottom: 10px;
        }

        /* POINTS DISPLAY */
        .points-display {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 24px;
            font-weight: 900;
            text-align: center;
            margin: 15px 0;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.6);
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 5px 20px rgba(255, 215, 0, 0.6); }
            50% { box-shadow: 0 5px 30px rgba(255, 215, 0, 0.9); }
        }

        /* QUIZ STYLES */
        .quiz-question {
            font-size: 24px;
            color: #FFD700;
            text-align: center;
            margin: 20px 0;
            font-weight: 700;
            line-height: 1.5;
        }

        .quiz-options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .quiz-option {
            background: linear-gradient(145deg, rgba(40, 0, 0, 0.9), rgba(20, 0, 0, 0.95));
            border: 3px solid #DAA520;
            padding: 20px;
            border-radius: 20px;
            font-size: 18px;
            color: #E6D3A7;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .quiz-option:hover {
            transform: scale(1.05);
            border-color: #FFD700;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
        }

        .quiz-option.correct {
            background: linear-gradient(145deg, rgba(102, 187, 106, 0.4), rgba(70, 150, 70, 0.5));
            border-color: #66BB6A;
            animation: correctPulse 0.5s;
        }

        .quiz-option.incorrect {
            background: linear-gradient(145deg, rgba(255, 82, 82, 0.4), rgba(220, 50, 50, 0.5));
            border-color: #FF5252;
            animation: shake 0.5s;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* BUTTONS */
        .btn {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            border: none;
            padding: 18px 35px;
            font-size: 20px;
            font-weight: 800;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 35px rgba(255, 215, 0, 0.7);
        }

        .btn:active {
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #8B0000, #A00000);
            color: #FFD700;
        }

        .btn-success {
            background: linear-gradient(135deg, #66BB6A, #4CAF50);
            color: white;
        }

        /* CERTIFICATE */
        #certificate-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        #certificate {
            background: linear-gradient(145deg, #ffffff 0%, #fffef9 100%);
            width: 210mm;
            height: 297mm;
            padding: 20mm;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
            border: 10px solid;
            border-image: linear-gradient(45deg, #DAA520, #FFD700, #B8860B, #FFD700, #DAA520) 1;
            text-align: center;
            position: relative;
        }

        .cert-ornament {
            font-size: 48px;
            color: #DAA520;
            margin: 10mm 0;
        }

        .cert-title {
            font-family: 'Playfair Display', serif;
            font-size: 56px;
            font-weight: 900;
            background: linear-gradient(135deg, #B8860B, #FFD700, #FFED4E, #FFD700, #B8860B);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 10mm 0;
            letter-spacing: 8mm;
        }

        .cert-subtitle {
            font-size: 24px;
            color: #000;
            font-weight: 700;
            margin-bottom: 15mm;
            letter-spacing: 4px;
        }

        .cert-name {
            font-family: 'Poppins', sans-serif;
            font-size: 56px;
            font-weight: 900;
            color: #000;
            margin: 15mm 0;
            padding: 12mm 30mm;
            border-top: 5px solid #000;
            border-bottom: 5px solid #000;
            display: inline-block;
            letter-spacing: 5px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(218, 165, 32, 0.15));
        }

        .cert-level {
            font-size: 32px;
            font-weight: 800;
            color: #000;
            margin: 10mm 0;
            padding: 8mm;
            border: 5px solid #000;
            background: linear-gradient(135deg, rgba(218, 165, 32, 0.25), rgba(255, 215, 0, 0.2));
            border-radius: 15px;
            display: inline-block;
        }

        .cert-message {
            font-size: 19px;
            color: #000;
            line-height: 2.2;
            margin: 15mm auto;
            max-width: 170mm;
            font-weight: 600;
        }

        /* ADMIN DASHBOARD */
        .admin-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .admin-stat-card {
            background: linear-gradient(145deg, rgba(20, 0, 0, 0.95), rgba(10, 0, 0, 0.98));
            padding: 25px;
            border-radius: 20px;
            border: 3px solid #FFD700;
            text-align: center;
        }

        .stat-icon {
            font-size: 50px;
            margin-bottom: 15px;
        }

        .stat-number {
            font-size: 42px;
            font-weight: 900;
            color: #FFD700;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 16px;
            color: #E6D3A7;
            font-weight: 600;
        }

        @media (max-width: 480px) {
            .logo-letter { font-size: 38px; }
            .story-title { font-size: 26px; }
            .word-german { font-size: 32px; }
            .level-grid { grid-template-columns: 1fr; }
            #certificate { transform: scale(0.35); transform-origin: top center; }
        }
    </style>
</head>
<body>
    <div class="animated-bg" id="animatedBg"></div>
    
    <div class="app-container">
        <!-- HEADER -->
        <div class="app-header">
            <div class="wfa-logo">
                <span class="logo-letter w">W</span>
                <span class="logo-letter f">F</span>
                <span class="logo-letter a">A</span>
            </div>
            <div class="logo-subtitle" id="logoSubtitle">AKADEMIE</div>
        </div>

        <!-- INTRO SCREEN -->
        <div class="screen active" id="screen-intro">
            <div class="story-intro">
                <div class="story-title">
                    üåü Willkommen in der magischen Welt der deutschen K√ºche! üåü
                </div>
                
                <div class="story-text">
                    <strong>Die Geschichte beginnt...</strong><br><br>
                    
                    In einem kleinen, gem√ºtlichen Restaurant im Herzen Berlins arbeitet <strong style="color: #FFD700;">Chef Hans</strong>, ein leidenschaftlicher Koch mit einem gro√üen Traum: Er m√∂chte das beste deutsche Restaurant der Welt er√∂ffnen! üèÜ
                </div>

                <div class="story-highlight">
                    ‚ö†Ô∏è <strong>Das Problem:</strong> Chef Hans hat ein gro√ües Problem! Seine internationalen G√§ste verstehen die deutsche K√ºche nicht. Sie kennen die W√∂rter nicht, verstehen die Speisekarte nicht und wissen nicht, wie man sich am Tisch benimmt!
                </div>

                <div class="story-text">
                    <strong style="color: #FFD700;">üéØ Deine Mission:</strong><br><br>
                    
                    Chef Hans braucht DEINE Hilfe! Du wirst sein Lehrling und lernst alles √ºber:<br>
                    ‚ú® Deutsche K√ºchenvokabeln<br>
                    ‚ú® Restaurant-Etikette<br>
                    ‚ú® Tischmanieren<br>
                    ‚ú® Deutsche Esskultur & Traditionen<br><br>
                    
                    F√ºr jedes neue Wort und jede richtige Antwort bekommst du <strong style="color: #FFD700;">Goldene Sterne ‚≠ê</strong>!
                </div>

                <div class="character-card">
                    <div class="character-avatar">üë®‚Äçüç≥</div>
                    <div class="character-info">
                        <h3>Chef Hans</h3>
                        <p>"Hallo! Ich bin Chef Hans und ich freue mich sehr, dass du mir hilfst! Zusammen werden wir die deutsche K√ºche erobern!"</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <input type="text" id="studentName" placeholder="Wie hei√üt du?" style="width: 80%; padding: 20px; font-size: 20px; border-radius: 20px; border: 3px solid #FFD700; background: rgba(0,0,0,0.8); color: #FFD700; text-align: center; font-weight: 700;">
                    <br><br>
                    <button class="btn" id="startAdventure">üöÄ Abenteuer Starten!</button>
                </div>
            </div>
        </div>

        <!-- LEVEL SELECTION SCREEN -->
        <div class="screen" id="screen-levels">
            <div class="points-display">
                ‚≠ê Deine Sterne: <span id="totalPoints">0</span>
            </div>

            <div class="story-title" style="margin: 30px 0;">
                W√§hle dein Niveau!
            </div>

            <div class="level-grid">
                <div class="level-card" data-level="A1">
                    <span class="level-badge">üå±</span>
                    <div class="level-name">Stufe A1</div>
                    <div class="level-desc">Anf√§nger<br>Grundwortschatz</div>
                </div>

                <div class="level-card level-locked" data-level="A2">
                    <span class="level-badge">üåø</span>
                    <div class="level-name">Stufe A2</div>
                    <div class="level-desc">Elementar<br>Alltag & Gespr√§che</div>
                </div>

                <div class="level-card level-locked" data-level="B1">
                    <span class="level-badge">üå≥</span>
                    <div class="level-name">Stufe B1</div>
                    <div class="level-desc">Fortgeschritten<br>Detaillierte Texte</div>
                </div>

                <div class="level-card level-locked" data-level="B2">
                    <span class="level-badge">üèÜ</span>
                    <div class="level-name">Stufe B2</div>
                    <div class="level-desc">Kompetent<br>Komplexe Themen</div>
                </div>
            </div>
        </div>

        <!-- LEARNING SCREEN -->
        <div class="screen" id="screen-learning">
            <div class="progress-text">
                üìö Lektion <span id="currentLesson">1</span> von <span id="totalLessons">20</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>

            <div class="points-display">
                ‚≠ê <span id="currentPoints">0</span> Sterne
            </div>

            <div class="learning-card" id="learningCard">
                <div class="card-content" id="cardContent">
                    <div class="card-front">
                        <div class="word-icon" id="wordIcon">üçΩÔ∏è</div>
                        <div class="word-type" id="wordType">der / die / das</div>
                        <div class="word-german" id="wordGerman">das Geschirr</div>
                        <p style="color: #FFD700; margin-top: 20px;">üëÜ Tippe zum Umdrehen!</p>
                    </div>
                    <div class="card-back">
                        <div class="word-meaning" id="wordMeaning"></div>
                        <div class="word-example" id="wordExample"></div>
                    </div>
                </div>
            </div>

            <div style="text-align: center;">
                <button class="btn btn-secondary" id="prevBtn">‚óÄ Zur√ºck</button>
                <button class="btn" id="nextBtn">Weiter ‚ñ∂</button>
            </div>
        </div>

        <!-- QUIZ SCREEN -->
        <div class="screen" id="screen-quiz">
            <div class="story-title">üìù Quiz-Zeit!</div>
            
            <div class="points-display">
                üéØ Punkte: <span id="quizPoints">0</span> / <span id="quizTotal">10</span>
            </div>

            <div class="quiz-question" id="quizQuestion"></div>
            <div class="quiz-options" id="quizOptions"></div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" id="nextQuizBtn" style="display: none;">N√§chste Frage ‚ñ∂</button>
            </div>
        </div>

        <!-- RESULTS SCREEN -->
        <div class="screen" id="screen-results">
            <div class="story-title">üéâ Gl√ºckwunsch!</div>
            
            <div class="character-card">
                <div class="character-avatar">üë®‚Äçüç≥</div>
                <div class="character-info">
                    <h3>Chef Hans sagt:</h3>
                    <p id="chefMessage">"Fantastisch! Du hast es geschafft!"</p>
                </div>
            </div>

            <div class="points-display" style="font-size: 32px;">
                ‚≠ê Gesamtpunkte: <span id="finalPoints">0</span>
            </div>

            <div id="levelBadge" style="text-align: center; font-size: 48px; margin: 30px 0;"></div>

            <div style="text-align: center;">
                <button class="btn btn-success" id="getCertBtn">üìú Zertifikat Herunterladen</button>
                <button class="btn" id="continueBtn">‚û°Ô∏è Weiter zum n√§chsten Level</button>
                <button class="btn btn-secondary" id="restartBtn">üîÑ Neu Starten</button>
            </div>
        </div>

        <!-- ADMIN DASHBOARD -->
        <div class="screen" id="screen-admin">
            <div class="story-title">üîê Admin Dashboard</div>
            
            <div class="admin-stats-grid">
                <div class="admin-stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-number" id="totalStudents">0</div>
                    <div class="stat-label">Studenten</div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-number" id="avgLevel">A1</div>
                    <div class="stat-label">√ò Niveau</div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-number" id="totalStars">0</div>
                    <div class="stat-label">Gesamtsterne</div>
                </div>
                <div class="admin-stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-number" id="completedLevels">0</div>
                    <div class="stat-label">Abgeschlossen</div>
                </div>
            </div>

            <div style="max-height: 400px; overflow-y: auto; margin: 20px 0;">
                <table id="studentsTable" style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: rgba(255,215,0,0.2); border-bottom: 3px solid #FFD700;">
                            <th style="padding: 15px; text-align: left;">Name</th>
                            <th style="padding: 15px; text-align: center;">Niveau</th>
                            <th style="padding: 15px; text-align: center;">‚≠ê</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody"></tbody>
                </table>
            </div>

            <div style="text-align: center;">
                <button class="btn" id="exportBtn">üìä CSV Export</button>
                <button class="btn btn-secondary" id="clearBtn">üóëÔ∏è Daten L√∂schen</button>
                <button class="btn" id="backBtn">üè† Zur√ºck</button>
            </div>
        </div>
    </div>

    <!-- CERTIFICATE -->
    <div id="certificate-container">
        <div id="certificate">
            <div class="cert-ornament">‚ú¶ ‚úß ‚ú¶</div>
            <div class="cert-title">ZERTIFIKAT</div>
            <div class="cert-subtitle">DER WFA AKADEMIE</div>
            <div style="height: 3px; width: 150mm; background: linear-gradient(90deg, transparent, #DAA520, #FFD700, #DAA520, transparent); margin: 10mm auto;"></div>
            <div style="font-size: 22px; font-weight: 700; margin: 15mm 0;">Hiermit wird best√§tigt, dass</div>
            <div class="cert-name" id="certName">TEILNEHMER</div>
            <div style="height: 3px; width: 150mm; background: linear-gradient(90deg, transparent, #DAA520, #FFD700, #DAA520, transparent); margin: 10mm auto;"></div>
            <div class="cert-message">
                das umfassende Programm "Deutsche K√ºchen-Meister" erfolgreich<br>
                abgeschlossen und exzellente Kenntnisse in deutscher K√ºchenvokabular,<br>
                Restaurant-Etikette und Esskultur demonstriert hat.
            </div>
            <div class="cert-level" id="certLevel">Niveau: A1</div>
            <div style="font-size: 20px; font-weight: 800; margin-top: 15mm;">
                <span id="certDate"></span> ‚Ä¢ Berlin, Deutschland
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // COMPLETE VOCABULARY DATABASE - 4 LEVELS
        // ============================================
        const vocabularyDatabase = {
            A1: [
                {word: "das Geschirr", type: "das", icon: "üçΩÔ∏è", meaning: "Alle Gegenst√§nde zum Essen (Teller, Tassen, Gl√§ser)", example: "Ich muss das Geschirr sp√ºlen.", points: 10},
                {word: "der Teller", type: "der", icon: "üçΩÔ∏è", meaning: "Eine flache Sch√ºssel f√ºr Essen", example: "Stell bitte den Teller auf den Tisch!", points: 10},
                {word: "die Tasse", type: "die", icon: "‚òï", meaning: "Ein Gef√§√ü mit Henkel f√ºr hei√üe Getr√§nke", example: "M√∂chtest du eine Tasse Kaffee?", points: 10},
                {word: "das Glas", type: "das", icon: "ü•õ", meaning: "Ein durchsichtiger Beh√§lter zum Trinken", example: "Ich h√§tte gern ein Glas Wasser.", points: 10},
                {word: "die Gabel", type: "die", icon: "üç¥", meaning: "Esswerkzeug mit Zinken", example: "Ich esse mit Messer und Gabel.", points: 10},
                {word: "das Messer", type: "das", icon: "üî™", meaning: "Werkzeug zum Schneiden", example: "Das Messer ist sehr scharf.", points: 10},
                {word: "der L√∂ffel", type: "der", icon: "ü•Ñ", meaning: "Esswerkzeug f√ºr Suppe", example: "Ich brauche einen L√∂ffel f√ºr die Suppe.", points: 10},
                {word: "das Brot", type: "das", icon: "üçû", meaning: "Grundnahrungsmittel aus Mehl", example: "Ich esse gern frisches Brot.", points: 10},
                {word: "die Butter", type: "die", icon: "üßà", meaning: "Fetthaltiges Milchprodukt", example: "Ich streiche Butter auf das Brot.", points: 10},
                {word: "der K√§se", type: "der", icon: "üßÄ", meaning: "Festes Milchprodukt", example: "Dieser K√§se schmeckt sehr gut!", points: 10},
                {word: "das Wasser", type: "das", icon: "üíß", meaning: "Klare Fl√ºssigkeit zum Trinken", example: "Ich trinke viel Wasser.", points: 10},
                {word: "der Kaffee", type: "der", icon: "‚òï", meaning: "Hei√ües Getr√§nk aus Bohnen", example: "Ich trinke jeden Morgen Kaffee.", points: 10},
                {word: "der Tee", type: "der", icon: "üçµ", meaning: "Hei√ües Getr√§nk aus Bl√§ttern", example: "M√∂chtest du Tee oder Kaffee?", points: 10},
                {word: "die Milch", type: "die", icon: "ü•õ", meaning: "Wei√üe Fl√ºssigkeit von K√ºhen", example: "Ich trinke Milch im Kaffee.", points: 10},
                {word: "Guten Appetit!", type: "", icon: "üçΩÔ∏è", meaning: "Wunsch vor dem Essen", example: "Guten Appetit! Lasst es euch schmecken!", points: 15},
                {word: "Prost!", type: "", icon: "üçª", meaning: "Trinkspruch beim Ansto√üen", example: "Prost! Auf deine Gesundheit!", points: 15},
                {word: "Ich habe Hunger.", type: "", icon: "üòã", meaning: "Ich m√∂chte etwas essen", example: "Ich habe gro√üen Hunger. Wann essen wir?", points: 15},
                {word: "Ich habe Durst.", type: "", icon: "ü•§", meaning: "Ich m√∂chte etwas trinken", example: "Ich habe Durst. Gibt es Wasser?", points: 15},
                {word: "Das schmeckt gut!", type: "", icon: "üòã", meaning: "Das Essen ist lecker", example: "Mmm, das schmeckt wirklich gut!", points: 15},
                {word: "Ich bin satt.", type: "", icon: "üòä", meaning: "Ich habe genug gegessen", example: "Danke, ich bin satt.", points: 15}
            ],
            
            A2: [
                {word: "das Restaurant", type: "das", icon: "üè™", meaning: "Ort wo man essen kann", example: "Gehen wir heute ins Restaurant?", points: 15},
                {word: "die Speisekarte", type: "die", icon: "üìã", meaning: "Liste mit allen Gerichten", example: "Kann ich bitte die Speisekarte haben?", points: 15},
                {word: "der Kellner", type: "der", icon: "üë®‚Äçüç≥", meaning: "Person die bedient (m√§nnlich)", example: "Der Kellner bringt das Essen.", points: 15},
                {word: "die Kellnerin", type: "die", icon: "üë©‚Äçüç≥", meaning: "Person die bedient (weiblich)", example: "Die Kellnerin ist sehr freundlich.", points: 15},
                {word: "die Rechnung", type: "die", icon: "üßæ", meaning: "Zahlung f√ºr Essen", example: "Die Rechnung, bitte!", points: 15},
                {word: "das Trinkgeld", type: "das", icon: "üí∞", meaning: "Extra Geld f√ºr Service", example: "In Deutschland gibt man 10% Trinkgeld.", points: 15},
                {word: "die Vorspeise", type: "die", icon: "ü•ó", meaning: "Erstes Gericht", example: "Als Vorspeise nehme ich Salat.", points: 15},
                {word: "das Hauptgericht", type: "das", icon: "üçΩÔ∏è", meaning: "Hauptessen", example: "Mein Hauptgericht ist Schnitzel.", points: 15},
                {word: "der Nachtisch", type: "der", icon: "üç∞", meaning: "S√º√ües am Ende", example: "Zum Nachtisch m√∂chte ich Eis.", points: 15},
                {word: "die Beilage", type: "die", icon: "üçü", meaning: "Extra Essen zum Hauptgericht", example: "Als Beilage nehme ich Pommes.", points: 15},
                {word: "Was k√∂nnen Sie empfehlen?", type: "", icon: "ü§î", meaning: "Frage nach Rat", example: "Was k√∂nnen Sie mir heute empfehlen?", points: 20},
                {word: "Ich m√∂chte bestellen.", type: "", icon: "üìù", meaning: "Bereit zum Bestellen", example: "Entschuldigung, ich m√∂chte bestellen.", points: 20},
                {word: "Die Rechnung, bitte.", type: "", icon: "üßæ", meaning: "Bitte zum Zahlen", example: "Wir m√∂chten zahlen. Die Rechnung, bitte.", points: 20},
                {word: "Getrennt oder zusammen?", type: "", icon: "üí∞", meaning: "Frage beim Bezahlen", example: "Zahlen Sie getrennt oder zusammen?", points: 20},
                {word: "Ist hier noch frei?", type: "", icon: "ü™ë", meaning: "Frage nach freiem Platz", example: "Entschuldigung, ist hier noch frei?", points: 20},
                {word: "Ein Tisch f√ºr zwei Personen.", type: "", icon: "üë•", meaning: "Tisch reservieren", example: "Ein Tisch f√ºr zwei Personen, bitte.", points: 20},
                {word: "Mit Karte oder bar?", type: "", icon: "üí≥", meaning: "Zahlungsmethode", example: "M√∂chten Sie mit Karte oder bar zahlen?", points: 20},
                {word: "Ohne Zwiebeln, bitte.", type: "", icon: "üö´", meaning: "Etwas weglassen", example: "Ich h√§tte gern einen Salat ohne Zwiebeln.", points: 20},
                {word: "Zum Mitnehmen, bitte.", type: "", icon: "üì¶", meaning: "Essen zum Mitnehmen", example: "Eine Pizza zum Mitnehmen, bitte.", points: 20},
                {word: "Das war sehr lecker!", type: "", icon: "üòã", meaning: "Lob f√ºr Essen", example: "Das Essen war sehr lecker! Danke!", points: 20}
            ],
            
            B1: [
                {word: "die Tischmanieren", type: "die", icon: "üé©", meaning: "Benehmen am Esstisch", example: "In Deutschland sind gute Tischmanieren wichtig.", points: 20},
                {word: "die Serviette", type: "die", icon: "üßª", meaning: "Tuch zum Abwischen", example: "Leg die Serviette auf deinen Scho√ü.", points: 20},
                {word: "das Gedeck", type: "das", icon: "üçΩÔ∏è", meaning: "Komplettes Geschirr f√ºr eine Person", example: "Das Gedeck ist perfekt arrangiert.", points: 20},
                {word: "die Tischdekoration", type: "die", icon: "üíê", meaning: "Schmuck auf dem Tisch", example: "Die Tischdekoration ist wundersch√∂n.", points: 20},
                {word: "der Gastgeber", type: "der", icon: "üë®‚Äçüç≥", meaning: "Person die einl√§dt", example: "Der Gastgeber begr√º√üt seine G√§ste.", points: 20},
                {word: "die Gastgeberin", type: "die", icon: "üë©‚Äçüç≥", meaning: "Person die einl√§dt (weiblich)", example: "Die Gastgeberin serviert das Essen.", points: 20},
                {word: "die Einladung", type: "die", icon: "üíå", meaning: "Aufforderung zu kommen", example: "Danke f√ºr die Einladung zum Abendessen!", points: 20},
                {word: "der Toast", type: "der", icon: "ü•Ç", meaning: "Festlicher Trinkspruch", example: "Ich m√∂chte einen Toast aussprechen!", points: 20},
                {word: "der Gang", type: "der", icon: "üçΩÔ∏è", meaning: "Teil eines Men√ºs", example: "Das Men√º hat f√ºnf G√§nge.", points: 20},
                {word: "die Portion", type: "die", icon: "üçΩÔ∏è", meaning: "Menge des Essens", example: "Die Portionen sind sehr gro√ü.", points: 20},
                {word: "Ich bin allergisch gegen N√ºsse.", type: "", icon: "üö´", meaning: "Allergie-Hinweis", example: "Achtung: Ich bin allergisch gegen N√ºsse!", points: 25},
                {word: "K√∂nnte ich noch etwas Brot haben?", type: "", icon: "üçû", meaning: "H√∂fliche Bitte", example: "Entschuldigung, k√∂nnte ich noch etwas Brot haben?", points: 25},
                {word: "Das ist nicht das, was ich bestellt habe.", type: "", icon: "‚ùå", meaning: "Falsche Bestellung", example: "Entschuldigung, das ist nicht das, was ich bestellt habe.", points: 25},
                {word: "Gibt es vegetarische Gerichte?", type: "", icon: "ü•ó", meaning: "Frage nach Optionen", example: "Ich bin Vegetarier. Gibt es vegetarische Gerichte?", points: 25},
                {word: "Welchen Wein empfehlen Sie dazu?", type: "", icon: "üç∑", meaning: "Frage nach Weinempfehlung", example: "Welchen Wein empfehlen Sie zu diesem Gericht?", points: 25},
                {word: "K√∂nnten Sie das Rezept verraten?", type: "", icon: "üìù", meaning: "Frage nach Rezept", example: "Das war fantastisch! K√∂nnten Sie das Rezept verraten?", points: 25},
                {word: "Haben Sie einen Hochstuhl f√ºr Kinder?", type: "", icon: "üë∂", meaning: "Frage nach Kinderstuhl", example: "Haben Sie einen Hochstuhl f√ºr mein Kind?", points: 25},
                {word: "Ich h√§tte gern eine Reservierung.", type: "", icon: "üìÖ", meaning: "Tisch vorbestellen", example: "Ich h√§tte gern eine Reservierung f√ºr heute Abend.", points: 25},
                {word: "Darf ich um Salz und Pfeffer bitten?", type: "", icon: "üßÇ", meaning: "H√∂fliche Bitte um Gew√ºrze", example: "Darf ich um Salz und Pfeffer bitten?", points: 25},
                {word: "Kompliment an den Koch!", type: "", icon: "üë®‚Äçüç≥", meaning: "Lob f√ºr Koch", example: "Das war hervorragend! Kompliment an den Koch!", points: 25}
            ],
            
            B2: [
                {word: "die Esskultur", type: "die", icon: "üé≠", meaning: "Traditionen beim Essen", example: "Die deutsche Esskultur ist sehr interessant.", points: 25},
                {word: "die Tischordnung", type: "die", icon: "ü™ë", meaning: "Sitzordnung bei Festessen", example: "Bei formellen Anl√§ssen gibt es eine feste Tischordnung.", points: 25},
                {word: "das Besteckplatzieren", type: "das", icon: "üç¥", meaning: "Richtige Lage des Bestecks", example: "Das Besteckplatzieren signalisiert dem Kellner, ob man fertig ist.", points: 25},
                {word: "die Weinbegleitung", type: "die", icon: "üç∑", meaning: "Wein passend zum Essen", example: "Die Weinbegleitung wurde perfekt ausgew√§hlt.", points: 25},
                {word: "der Amuse-Gueule", type: "der", icon: "üçΩÔ∏è", meaning: "Kleiner Gru√ü aus der K√ºche", example: "Als Amuse-Gueule gab es eine Lachs-Creme.", points: 25},
                {word: "die Men√ºfolge", type: "die", icon: "üìã", meaning: "Reihenfolge der Gerichte", example: "Die Men√ºfolge war perfekt abgestimmt.", points: 25},
                {word: "der Sommelier", type: "der", icon: "üç∑", meaning: "Wein-Experte", example: "Der Sommelier empfiehlt einen exzellenten Rotwein.", points: 25},
                {word: "die Tafelmusik", type: "die", icon: "üéµ", meaning: "Musik beim festlichen Essen", example: "Die Tafelmusik schuf eine elegante Atmosph√§re.", points: 25},
                {word: "das Tischtuch", type: "das", icon: "üõèÔ∏è", meaning: "Elegante Tischdecke", example: "Das wei√üe Tischtuch ist aus feinem Leinen.", points: 25},
                {word: "der Tafelsilber", type: "der", icon: "üç¥", meaning: "Silbernes Besteck", example: "F√ºr das Fest wurde das Tafelsilber verwendet.", points: 25},
                {word: "Es w√§re mir eine Ehre, wenn Sie k√§men.", type: "", icon: "üíå", meaning: "Formelle Einladung", example: "Es w√§re mir eine gro√üe Ehre, wenn Sie zu unserem Dinner k√§men.", points: 30},
                {word: "Darf ich Ihnen nachschenken?", type: "", icon: "üç∑", meaning: "H√∂fliches Angebot", example: "Darf ich Ihnen noch etwas Wein nachschenken?", points: 30},
                {word: "Lassen Sie uns auf das Wohl ansto√üen!", type: "", icon: "ü•Ç", meaning: "Toast aussprechen", example: "Lassen Sie uns auf das Wohl unseres Gastgebers ansto√üen!", points: 30},
                {word: "Die Speisen waren k√∂stlich zubereitet.", type: "", icon: "üòã", meaning: "Formelles Lob", example: "Die Speisen waren ausgezeichnet und k√∂stlich zubereitet.", points: 30},
                {word: "Gestatten Sie, dass ich mich vorstelle?", type: "", icon: "ü§ù", meaning: "Formelle Vorstellung", example: "Gestatten Sie, dass ich mich vorstelle? Mein Name ist...", points: 30},
                {word: "Mit welcher Verfeinerung wurde dies zubereitet?", type: "", icon: "üë®‚Äçüç≥", meaning: "Frage nach Zubereitung", example: "Darf ich fragen, mit welcher Verfeinerung dies zubereitet wurde?", points: 30},
                {word: "Das Arrangement ist makellos.", type: "", icon: "üé®", meaning: "Lob f√ºr Pr√§sentation", example: "Das Arrangement der Speisen ist makellos!", points: 30},
                {word: "Welcher Jahrgang ist dieser Wein?", type: "", icon: "üç∑", meaning: "Frage nach Weinjahrgang", example: "Darf ich fragen, welcher Jahrgang dieser exzellente Wein ist?", points: 30},
                {word: "Die Gastfreundschaft ist au√üergew√∂hnlich.", type: "", icon: "‚ù§Ô∏è", meaning: "Lob f√ºr Gastgeber", example: "Ihre Gastfreundschaft ist wahrhaft au√üergew√∂hnlich!", points: 30},
                {word: "Ein kulinarisches Meisterwerk!", type: "", icon: "üåü", meaning: "H√∂chstes Lob", example: "Diese Kreation ist ein wahres kulinarisches Meisterwerk!", points: 30}
            ]
        };

        // QUIZ QUESTIONS DATABASE
        const quizDatabase = {
            A1: [
                {q: "Was bedeutet 'Guten Appetit'?", options: ["Wunsch vor dem Essen", "Hallo", "Auf Wiedersehen", "Danke"], correct: 0},
                {q: "Mit welchem Werkzeug isst man Suppe?", options: ["mit dem L√∂ffel", "mit der Gabel", "mit dem Messer", "mit den H√§nden"], correct: 0},
                {q: "Was sagt man beim Ansto√üen?", options: ["Prost!", "Danke!", "Bitte!", "Tsch√ºss!"], correct: 0},
                {q: "Was bedeutet 'Ich habe Hunger'?", options: ["Ich m√∂chte essen", "Ich m√∂chte trinken", "Ich bin m√ºde", "Ich bin satt"], correct: 0},
                {q: "Was ist 'das Brot'?", options: ["Grundnahrungsmittel", "Getr√§nk", "Besteck", "M√∂bel"], correct: 0},
                {q: "Wof√ºr braucht man eine Gabel?", options: ["Zum Essen", "Zum Trinken", "Zum Schneiden", "Zum Kochen"], correct: 0},
                {q: "Was trinkt man aus einem Glas?", options: ["Wasser", "Suppe", "Brot", "K√§se"], correct: 0},
                {q: "Was bedeutet 'Ich bin satt'?", options: ["Ich habe genug gegessen", "Ich habe Hunger", "Ich habe Durst", "Ich bin m√ºde"], correct: 0},
                {q: "Wo legt man Butter drauf?", options: ["Auf Brot", "In Kaffee", "In Wasser", "Auf Teller"], correct: 0},
                {q: "Was ist 'der K√§se'?", options: ["Milchprodukt", "Getr√§nk", "Werkzeug", "M√∂bel"], correct: 0}
            ],
            A2: [
                {q: "Was ist 'die Speisekarte'?", options: ["Liste der Gerichte", "Rechnung", "Besteck", "Tisch"], correct: 0},
                {q: "Was fragt der Kellner beim Zahlen?", options: ["Getrennt oder zusammen?", "Wie geht es?", "Woher kommen Sie?", "Was essen Sie?"], correct: 0},
                {q: "Was ist eine 'Vorspeise'?", options: ["Erstes Gericht", "Hauptgericht", "Nachtisch", "Getr√§nk"], correct: 0},
                {q: "Was bedeutet 'Trinkgeld'?", options: ["Extra Geld f√ºr Service", "Rechnung", "Getr√§nk", "Speisekarte"], correct: 0},
                {q: "Wie fragt man nach einem freien Platz?", options: ["Ist hier noch frei?", "Was kostet das?", "Zahlen bitte!", "Guten Tag!"], correct: 0},
                {q: "Was sagt man, wenn man bestellen m√∂chte?", options: ["Ich m√∂chte bestellen", "Ich habe Hunger", "Guten Appetit", "Prost"], correct: 0},
                {q: "Was bedeutet 'Zum Mitnehmen'?", options: ["Essen zum Mitnehmen", "Hier essen", "Reservierung", "Bezahlen"], correct: 0},
                {q: "Was ist der 'Nachtisch'?", options: ["S√º√ües am Ende", "Erstes Gericht", "Hauptspeise", "Getr√§nk"], correct: 0},
                {q: "Wie zahlt man im Restaurant?", options: ["Mit Karte oder bar", "Mit Brot", "Mit Wasser", "Mit Teller"], correct: 0},
                {q: "Was ist eine 'Beilage'?", options: ["Extra zum Hauptgericht", "Erstes Gericht", "Nachtisch", "Getr√§nk"], correct: 0}
            ],
            B1: [
                {q: "Was sind 'Tischmanieren'?", options: ["Benehmen am Tisch", "Essen", "Getr√§nke", "M√∂bel"], correct: 0},
                {q: "Wo legt man die Serviette hin?", options: ["Auf den Scho√ü", "Auf den Kopf", "In die Tasche", "Auf den Boden"], correct: 0},
                {q: "Was ist ein 'Gedeck'?", options: ["Komplettes Geschirr f√ºr eine Person", "Ein Tisch", "Ein Stuhl", "Ein Getr√§nk"], correct: 0},
                {q: "Wer ist der 'Gastgeber'?", options: ["Person die einl√§dt", "Koch", "Kellner", "Gast"], correct: 0},
                {q: "Was ist ein 'Toast'?", options: ["Festlicher Trinkspruch", "Brot", "Getr√§nk", "Gericht"], correct: 0},
                {q: "Wie fragt man h√∂flich nach mehr Brot?", options: ["K√∂nnte ich noch Brot haben?", "Gib mir Brot!", "Ich will Brot!", "Brot hier!"], correct: 0},
                {q: "Was bedeutet 'Gang' im Men√º?", options: ["Teil des Men√ºs", "Flur", "T√ºr", "Fenster"], correct: 0},
                {q: "Wie sagt man h√∂flich, dass man Allergien hat?", options: ["Ich bin allergisch gegen...", "Ich mag das nicht", "Das schmeckt nicht", "Ich will das nicht"], correct: 0},
                {q: "Was ist eine 'Portion'?", options: ["Menge des Essens", "Teller", "Gabel", "Tisch"], correct: 0},
                {q: "Wie fragt man nach vegetarischem Essen?", options: ["Gibt es vegetarische Gerichte?", "Ich habe Hunger", "Guten Appetit", "Die Rechnung bitte"], correct: 0}
            ],
            B2: [
                {q: "Was ist 'Esskultur'?", options: ["Traditionen beim Essen", "Kochen", "Restaurant", "Speisekarte"], correct: 0},
                {q: "Was bedeutet 'Besteckplatzieren'?", options: ["Signal f√ºr Kellner", "Essen kochen", "Tisch decken", "Zahlen"], correct: 0},
                {q: "Wer ist ein 'Sommelier'?", options: ["Wein-Experte", "Koch", "Kellner", "Gast"], correct: 0},
                {q: "Was ist 'Amuse-Gueule'?", options: ["Gru√ü aus der K√ºche", "Hauptgericht", "Nachtisch", "Getr√§nk"], correct: 0},
                {q: "Was ist 'Tafelsilber'?", options: ["Silbernes Besteck", "Teller", "Glas", "Tisch"], correct: 0},
                {q: "Wie l√§dt man formell ein?", options: ["Es w√§re mir eine Ehre", "Komm vorbei", "Hallo", "Tsch√ºss"], correct: 0},
                {q: "Was bedeutet 'nachschenken'?", options: ["Mehr eingie√üen", "Essen", "Trinken", "Zahlen"], correct: 0},
                {q: "Was ist 'Tischordnung'?", options: ["Sitzordnung bei Festen", "Essen bestellen", "Zahlen", "Kochen"], correct: 0},
                {q: "Wie lobt man formell das Essen?", options: ["Ein kulinarisches Meisterwerk", "Lecker", "Gut", "OK"], correct: 0},
                {q: "Was fragt man nach dem Weinjahrgang?", options: ["Welcher Jahrgang ist dieser Wein?", "Ist der Wein gut?", "Schmeckt der Wein?", "Was kostet der Wein?"], correct: 0}
            ]
        };

        // GAME STATE
        let currentLevel = 'A1';
        let currentLessonIndex = 0;
        let studentName = '';
        let totalPoints = 0;
        let quizPoints = 0;
        let currentQuizIndex = 0;
        let unlockedLevels = ['A1'];
        let students = JSON.parse(localStorage.getItem('wfaKitchenStudents')) || [];
        let adminClicks = 0;

        // DOM ELEMENTS
        const screens = {
            intro: document.getElementById('screen-intro'),
            levels: document.getElementById('screen-levels'),
            learning: document.getElementById('screen-learning'),
            quiz: document.getElementById('screen-quiz'),
            results: document.getElementById('screen-results'),
            admin: document.getElementById('screen-admin')
        };

        // Initialize floating food background
        function createFloatingFood() {
            const foods = ['üçï', 'üçî', 'üçü', 'üå≠', 'üçø', 'üßÅ', 'üç∞', 'üéÇ', 'üç™', 'üç©', 'üç´', 'üç¨', 'üç≠', 'ü•ß', 'üçé', 'üçä', 'üçã', 'üçå', 'üçâ', 'üçá', 'üçì', 'ü´ê', 'üçà', 'üçí', 'üçë', 'ü•≠', 'üçç', 'ü••', 'ü•ù'];
            const bg = document.getElementById('animatedBg');
            
            for(let i = 0; i < 15; i++) {
                const food = document.createElement('div');
                food.className = 'floating-food';
                food.textContent = foods[Math.floor(Math.random() * foods.length)];
                food.style.left = Math.random() * 100 + '%';
                food.style.top = Math.random() * 100 + '%';
                food.style.animationDelay = Math.random() * 5 + 's';
                food.style.animationDuration = (Math.random() * 10 + 15) + 's';
                bg.appendChild(food);
            }
        }

        createFloatingFood();

        // ADMIN ACCESS (5 clicks)
        document.getElementById('logoSubtitle').addEventListener('click', () => {
            adminClicks++;
            setTimeout(() => { adminClicks = 0; }, 2000);
            if(adminClicks === 5) {
                showScreen('admin');
                updateAdminDashboard();
                adminClicks = 0;
            }
        });

        // START ADVENTURE
        document.getElementById('startAdventure').addEventListener('click', () => {
            const name = document.getElementById('studentName').value.trim();
            if(!name) {
                alert('üéØ Bitte gib deinen Namen ein!');
                return;
            }
            studentName = name;
            showScreen('levels');
            playSound('start');
        });

        // LEVEL SELECTION
        document.querySelectorAll('.level-card').forEach(card => {
            card.addEventListener('click', () => {
                const level = card.dataset.level;
                if(!card.classList.contains('level-locked')) {
                    currentLevel = level;
                    currentLessonIndex = 0;
                    startLearning();
                    playSound('click');
                }
            });
        });

        // START LEARNING
        function startLearning() {
            showScreen('learning');
            loadLesson();
            updateProgress();
        }

        // LOAD LESSON
        function loadLesson() {
            const lessons = vocabularyDatabase[currentLevel];
            const lesson = lessons[currentLessonIndex];
            
            document.getElementById('currentLesson').textContent = currentLessonIndex + 1;
            document.getElementById('totalLessons').textContent = lessons.length;
            document.getElementById('currentPoints').textContent = totalPoints;
            
            document.getElementById('wordIcon').textContent = lesson.icon;
            document.getElementById('wordType').textContent = lesson.type || '‚ú® Ausdruck';
            document.getElementById('wordGerman').textContent = lesson.word;
            document.getElementById('wordMeaning').textContent = lesson.meaning;
            document.getElementById('wordExample').textContent = 'üí¨ "' + lesson.example + '"';
            
            document.getElementById('cardContent').classList.remove('flipped');
        }

        // CARD FLIP
        document.getElementById('learningCard').addEventListener('click', () => {
            document.getElementById('cardContent').classList.toggle('flipped');
            playSound('flip');
        });

        // NAVIGATION
        document.getElementById('nextBtn').addEventListener('click', () => {
            const lessons = vocabularyDatabase[currentLevel];
            totalPoints += lessons[currentLessonIndex].points;
            document.getElementById('currentPoints').textContent = totalPoints;
            
            currentLessonIndex++;
            if(currentLessonIndex >= lessons.length) {
                startQuiz();
            } else {
                loadLesson();
                updateProgress();
            }
            playSound('success');
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            if(currentLessonIndex > 0) {
                currentLessonIndex--;
                loadLesson();
                updateProgress();
                playSound('click');
            }
        });

        // UPDATE PROGRESS
        function updateProgress() {
            const lessons = vocabularyDatabase[currentLevel];
            const progress = ((currentLessonIndex + 1) / lessons.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // START QUIZ
        function startQuiz() {
            showScreen('quiz');
            currentQuizIndex = 0;
            quizPoints = 0;
            loadQuizQuestion();
        }

        // LOAD QUIZ QUESTION
        function loadQuizQuestion() {
            const quiz = quizDatabase[currentLevel];
            const question = quiz[currentQuizIndex];
            
            document.getElementById('quizPoints').textContent = quizPoints;
            document.getElementById('quizTotal').textContent = quiz.length;
            document.getElementById('quizQuestion').textContent = question.q;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const btn = document.createElement('div');
                btn.className = 'quiz-option';
                btn.textContent = option;
                btn.onclick = () => checkAnswer(index, question.correct);
                optionsContainer.appendChild(btn);
            });
            
            document.getElementById('nextQuizBtn').style.display = 'none';
        }

        // CHECK ANSWER
        function checkAnswer(selected, correct) {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.style.pointerEvents = 'none');
            
            if(selected === correct) {
                options[selected].classList.add('correct');
                quizPoints++;
                totalPoints += 50;
                playSound('correct');
            } else {
                options[selected].classList.add('incorrect');
                options[correct].classList.add('correct');
                playSound('wrong');
            }
            
            document.getElementById('quizPoints').textContent = quizPoints;
            
            setTimeout(() => {
                document.getElementById('nextQuizBtn').style.display = 'inline-block';
            }, 1000);
        }

        // NEXT QUIZ QUESTION
        document.getElementById('nextQuizBtn').addEventListener('click', () => {
            currentQuizIndex++;
            if(currentQuizIndex >= quizDatabase[currentLevel].length) {
                showResults();
            } else {
                loadQuizQuestion();
            }
        });

        // SHOW RESULTS
        function showResults() {
            showScreen('results');
            
            const percentage = (quizPoints / quizDatabase[currentLevel].length) * 100;
            document.getElementById('finalPoints').textContent = totalPoints;
            
            let message = '';
            let badge = '';
            
            if(percentage === 100) {
                message = `"üåü PERFEKT, ${studentName}! Du bist ein wahres Talent! Chef Hans ist sehr stolz auf dich!"`;
                badge = 'üèÜüë®‚Äçüç≥üåü';
                unlockNextLevel();
            } else if(percentage >= 80) {
                message = `"üéâ AUSGEZEICHNET, ${studentName}! Du machst fantastische Fortschritte!"`;
                badge = '‚≠êüë®‚Äçüç≥';
            } else if(percentage >= 60) {
                message = `"üëç GUT GEMACHT, ${studentName}! √úbe weiter und du wirst noch besser!"`;
                badge = '‚ú®üë®‚Äçüç≥';
            } else {
                message = `"üí™ Nicht aufgeben, ${studentName}! √úbung macht den Meister!"`;
                badge = 'üìöüë®‚Äçüç≥';
            }
            
            document.getElementById('chefMessage').textContent = message;
            document.getElementById('levelBadge').textContent = badge;
            
            saveStudent();
            playSound('applause');
        }

        // UNLOCK NEXT LEVEL
        function unlockNextLevel() {
            const levels = ['A1', 'A2', 'B1', 'B2'];
            const currentIndex = levels.indexOf(currentLevel);
            if(currentIndex < levels.length - 1) {
                const nextLevel = levels[currentIndex + 1];
                if(!unlockedLevels.includes(nextLevel)) {
                    unlockedLevels.push(nextLevel);
                    const levelCards = document.querySelectorAll('.level-card');
                    levelCards.forEach(card => {
                        if(card.dataset.level === nextLevel) {
                            card.classList.remove('level-locked');
                        }
                    });
                }
            }
        }

        // SAVE STUDENT
        function saveStudent() {
            const student = {
                name: studentName,
                level: currentLevel,
                points: totalPoints,
                date: new Date().toISOString()
            };
            students.push(student);
            localStorage.setItem('wfaKitchenStudents', JSON.stringify(students));
        }

        // CERTIFICATE
        document.getElementById('getCertBtn').addEventListener('click', () => {
            generateCertificate();
        });

        function generateCertificate() {
            document.getElementById('certName').textContent = studentName.toUpperCase();
            document.getElementById('certLevel').textContent = `Niveau: ${currentLevel}`;
            document.getElementById('certDate').textContent = new Date().toLocaleDateString('de-DE', {day: '2-digit', month: 'long', year: 'numeric'});
            
            document.getElementById('certificate-container').style.display = 'flex';
            
            setTimeout(() => {
                const { jsPDF } = window.jspdf;
                html2canvas(document.getElementById('certificate'), {scale: 3}).then(canvas => {
                    const pdf = new jsPDF('p', 'mm', 'a4');
                    const imgData = canvas.toDataURL('image/png');
                    const imgWidth = 210;
                    const imgHeight = (canvas.height * imgWidth) / canvas.width;
                    pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                    pdf.save(`WFA_Zertifikat_${studentName}_${currentLevel}.pdf`);
                    document.getElementById('certificate-container').style.display = 'none';
                });
            }, 500);
        }

        // BUTTONS
        document.getElementById('continueBtn').addEventListener('click', () => {
            showScreen('levels');
        });

        document.getElementById('restartBtn').addEventListener('click', () => {
            totalPoints = 0;
            showScreen('levels');
        });

        // ADMIN DASHBOARD
        function updateAdminDashboard() {
            document.getElementById('totalStudents').textContent = students.length;
            document.getElementById('totalStars').textContent = students.reduce((sum, s) => sum + s.points, 0);
            document.getElementById('completedLevels').textContent = students.filter(s => s.points >= 300).length;
            
            const levels = students.map(s => s.level);
            const mostCommon = levels.sort((a,b) => levels.filter(v => v===a).length - levels.filter(v => v===b).length).pop();
            document.getElementById('avgLevel').textContent = mostCommon || 'A1';
            
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = students.slice(-10).reverse().map(s => `
                <tr style="background: rgba(40,0,0,0.5); border-bottom: 2px solid rgba(255,215,0,0.2);">
                    <td style="padding: 12px; color: #FFD700; font-weight: 600;">${s.name}</td>
                    <td style="padding: 12px; text-align: center; color: #8EC5FC; font-weight: 700;">${s.level}</td>
                    <td style="padding: 12px; text-align: center; color: #FFD700; font-weight: 700;">${s.points}</td>
                </tr>
            `).join('');
        }

        document.getElementById('exportBtn').addEventListener('click', () => {
            let csv = "Name,Niveau,Punkte,Datum\n";
            students.forEach(s => {
                csv += `"${s.name}","${s.level}",${s.points},"${new Date(s.date).toLocaleDateString('de-DE')}"\n`;
            });
            const blob = new Blob([csv], {type: 'text/csv'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'WFA_Studenten_Export.csv';
            a.click();
        });

        document.getElementById('clearBtn').addEventListener('click', () => {
            if(confirm('‚ö†Ô∏è Wirklich alle Daten l√∂schen?')) {
                students = [];
                localStorage.removeItem('wfaKitchenStudents');
                updateAdminDashboard();
            }
        });

        document.getElementById('backBtn').addEventListener('click', () => {
            showScreen('levels');
        });

        // HELPER FUNCTIONS
        function showScreen(name) {
            Object.values(screens).forEach(s => s.classList.remove('active'));
            screens[name].classList.add('active');
        }

        function playSound(type) {
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain);
                gain.connect(ctx.destination);
                
                if(type === 'correct') {
                    osc.frequency.value = 523.25; // C
                    setTimeout(() => { osc.frequency.value = 659.25; }, 100); // E
                    setTimeout(() => { osc.frequency.value = 783.99; }, 200); // G
                } else if(type === 'wrong') {
                    osc.frequency.value = 200;
                    osc.type = 'sawtooth';
                } else if(type === 'flip') {
                    osc.frequency.value = 440;
                } else if(type === 'start' || type === 'success') {
                    for(let i = 0; i < 3; i++) {
                        setTimeout(() => {
                            osc.frequency.value = 400 + i * 100;
                        }, i * 100);
                    }
                } else if(type === 'applause') {
                    for(let i = 0; i < 20; i++) {
                        setTimeout(() => {
                            osc.frequency.value = 300 + Math.random() * 500;
                        }, i * 50);
                    }
                }
                
                gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.5);
                osc.start();
                osc.stop(ctx.currentTime + 0.5);
                setTimeout(() => ctx.close(), 600);
            } catch(e) {}
        }
    </script>
</body>
</html>
